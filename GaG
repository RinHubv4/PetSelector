--// Rin Trade Monitor v2
--// Fully visual-only reimagined UI

--== Services ==--
local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")

local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

--== UI Setup ==--
local gui = Instance.new("ScreenGui")
gui.Name = "RinTradeMonitorV2"
gui.ResetOnSpawn = false
gui.IgnoreGuiInset = true
gui.Parent = playerGui

--== Main Container ==--
local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0, 260, 0, 200)
mainFrame.Position = UDim2.new(0.5, -130, 0.5, -100)
mainFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 28)
mainFrame.BorderSizePixel = 0
mainFrame.BackgroundTransparency = 0.1
mainFrame.Active = true
mainFrame.Draggable = true
mainFrame.Parent = gui

-- Glow / Shadow effect
local uiStroke = Instance.new("UIStroke", mainFrame)
uiStroke.Thickness = 1.8
uiStroke.Color = Color3.fromRGB(90, 90, 120)
uiStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border

local uiCorner = Instance.new("UICorner", mainFrame)
uiCorner.CornerRadius = UDim.new(0, 14)

--== Header ==--
local titleBar = Instance.new("TextLabel")
titleBar.Size = UDim2.new(1, 0, 0, 38)
titleBar.BackgroundColor3 = Color3.fromRGB(32, 32, 45)
titleBar.Text = "‚ö° Rin Trade Monitor"
titleBar.TextColor3 = Color3.fromRGB(255, 255, 255)
titleBar.Font = Enum.Font.GothamBold
titleBar.TextSize = 17
titleBar.Parent = mainFrame
Instance.new("UICorner", titleBar).CornerRadius = UDim.new(0, 14)

local closeBtn = Instance.new("TextButton")
closeBtn.Size = UDim2.new(0, 34, 0, 34)
closeBtn.Position = UDim2.new(1, -36, 0, 2)
closeBtn.BackgroundTransparency = 1
closeBtn.Text = "√ó"
closeBtn.TextColor3 = Color3.fromRGB(200, 200, 200)
closeBtn.Font = Enum.Font.GothamBold
closeBtn.TextSize = 20
closeBtn.Parent = mainFrame

closeBtn.MouseEnter:Connect(function()
	TweenService:Create(closeBtn, TweenInfo.new(0.2), {TextColor3 = Color3.fromRGB(255, 90, 90)}):Play()
end)
closeBtn.MouseLeave:Connect(function()
	TweenService:Create(closeBtn, TweenInfo.new(0.2), {TextColor3 = Color3.fromRGB(200, 200, 200)}):Play()
end)
closeBtn.MouseButton1Click:Connect(function()
	TweenService:Create(mainFrame, TweenInfo.new(0.3), {BackgroundTransparency = 1, Position = UDim2.new(0.5, -130, 1, 0)}):Play()
	task.wait(0.3)
	gui:Destroy()
end)

--== Status Display ==--
local statusCard = Instance.new("Frame")
statusCard.Size = UDim2.new(1, -30, 0, 60)
statusCard.Position = UDim2.new(0, 15, 0, 50)
statusCard.BackgroundColor3 = Color3.fromRGB(30, 30, 45)
statusCard.BorderSizePixel = 0
statusCard.Parent = mainFrame
Instance.new("UICorner", statusCard).CornerRadius = UDim.new(0, 12)

local statusLabel = Instance.new("TextLabel")
statusLabel.Size = UDim2.new(1, 0, 1, 0)
statusLabel.BackgroundTransparency = 1
statusLabel.Text = "üîí Not in Trade"
statusLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
statusLabel.Font = Enum.Font.GothamMedium
statusLabel.TextSize = 16
statusLabel.Parent = statusCard

-- Subtle glowing border
local statusStroke = Instance.new("UIStroke", statusCard)
statusStroke.Thickness = 1.2
statusStroke.Color = Color3.fromRGB(80, 80, 120)

--== Toggles ==--
local toggleContainer = Instance.new("Frame")
toggleContainer.Size = UDim2.new(1, -30, 0, 70)
toggleContainer.Position = UDim2.new(0, 15, 0, 120)
toggleContainer.BackgroundTransparency = 1
toggleContainer.Parent = mainFrame

local uiList = Instance.new("UIListLayout", toggleContainer)
uiList.Padding = UDim.new(0, 10)

local toggles = {
	{ name = "Freeze Trade", icon = "‚ùÑÔ∏è" },
	{ name = "Auto Accept", icon = "‚öôÔ∏è" }
}
local toggleStates = {}

local function createToggle(info)
	local holder = Instance.new("Frame")
	holder.Size = UDim2.new(1, 0, 0, 30)
	holder.BackgroundTransparency = 1
	holder.Parent = toggleContainer

	local icon = Instance.new("TextLabel")
	icon.Size = UDim2.new(0, 25, 1, 0)
	icon.Text = info.icon
	icon.BackgroundTransparency = 1
	icon.TextSize = 20
	icon.Parent = holder

	local label = Instance.new("TextLabel")
	label.Size = UDim2.new(1, -70, 1, 0)
	label.Position = UDim2.new(0, 30, 0, 0)
	label.BackgroundTransparency = 1
	label.Text = info.name
	label.TextColor3 = Color3.fromRGB(230, 230, 230)
	label.Font = Enum.Font.Gotham
	label.TextSize = 14
	label.TextXAlignment = Enum.TextXAlignment.Left
	label.Parent = holder

	local button = Instance.new("TextButton")
	button.Size = UDim2.new(0, 55, 1, -2)
	button.Position = UDim2.new(1, -55, 0, 1)
	button.BackgroundColor3 = Color3.fromRGB(70, 70, 90)
	button.Text = "OFF"
	button.TextColor3 = Color3.fromRGB(255, 100, 100)
	button.Font = Enum.Font.GothamBold
	button.TextSize = 12
	button.Parent = holder
	Instance.new("UICorner", button).CornerRadius = UDim.new(0, 8)

	local ring = Instance.new("UIStroke", button)
	ring.Thickness = 1.5
	ring.Color = Color3.fromRGB(90, 90, 120)

	toggleStates[info.name] = false

	button.MouseEnter:Connect(function()
		TweenService:Create(button, TweenInfo.new(0.15), {BackgroundColor3 = Color3.fromRGB(80, 80, 100)}):Play()
	end)
	button.MouseLeave:Connect(function()
		local color = toggleStates[info.name] and Color3.fromRGB(90, 120, 90) or Color3.fromRGB(70, 70, 90)
		TweenService:Create(button, TweenInfo.new(0.15), {BackgroundColor3 = color}):Play()
	end)

	button.MouseButton1Click:Connect(function()
		local inTrade = false
		local mainGui = playerGui:FindFirstChild("Main")
		local tradeFrame = mainGui and mainGui:FindFirstChild("Trade")
		if tradeFrame and tradeFrame.Visible then inTrade = true end

		if not inTrade then
			statusLabel.Text = "‚ö†Ô∏è You‚Äôre not in trade!"
			statusLabel.TextColor3 = Color3.fromRGB(255, 90, 90)
			task.wait(1.5)
		else
			toggleStates[info.name] = not toggleStates[info.name]
			if toggleStates[info.name] then
				TweenService:Create(button, TweenInfo.new(0.25), {
					BackgroundColor3 = Color3.fromRGB(90, 120, 90),
					TextColor3 = Color3.fromRGB(100, 255, 100),
				}):Play()
				button.Text = "ON"
			else
				TweenService:Create(button, TweenInfo.new(0.25), {
					BackgroundColor3 = Color3.fromRGB(70, 70, 90),
					TextColor3 = Color3.fromRGB(255, 100, 100),
				}):Play()
				button.Text = "OFF"
			end
		end
	end)
end

for _, info in ipairs(toggles) do
	createToggle(info)
end

--== Trade Detection (visual-only) ==--
local function getTradePartner()
	local mainGui = playerGui:FindFirstChild("Main")
	if not mainGui then return false, "" end
	local trade = mainGui:FindFirstChild("Trade")
	if not trade or not trade.Visible then return false, "" end
	local container = trade:FindFirstChild("Container")
	if not container then return false, "" end
	local f1, f2 = container:FindFirstChild("1"), container:FindFirstChild("2")
	if not f1 or not f2 then return false, "" end
	local t1, t2 = f1:FindFirstChild("TextLabel"), f2:FindFirstChild("TextLabel")
	if not t1 or not t2 then return false, "" end

	local lname = string.lower(player.Name)
	local ldisp = string.lower(player.DisplayName)
	local p1, p2 = string.lower(t1.Text), string.lower(t2.Text)

	if p1 == lname or p1 == ldisp then
		return true, t2.Text
	elseif p2 == lname or p2 == ldisp then
		return true, t1.Text
	else
		return false, ""
	end
end

--== Status Updater ==--
RunService.Heartbeat:Connect(function()
	local inTrade, partner = getTradePartner()
	if inTrade then
		statusLabel.Text = "ü§ù Trading with " .. partner
		statusLabel.TextColor3 = Color3.fromRGB(100, 255, 100)
		statusStroke.Color = Color3.fromRGB(100, 255, 100)
	else
		statusLabel.Text = "üîí Not in Trade"
		statusLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
		statusStroke.Color = Color3.fromRGB(80, 80, 120)
	end
end)

--== Entrance Animation ==--
mainFrame.Position = UDim2.new(0.5, -130, 1, 0)
mainFrame.BackgroundTransparency = 1
TweenService:Create(mainFrame, TweenInfo.new(0.5, Enum.EasingStyle.Quart, Enum.EasingDirection.Out), {
	Position = UDim2.new(0.5, -130, 0.5, -100),
	BackgroundTransparency = 0.1
}):Play()
